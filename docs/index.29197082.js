var e=globalThis,t={},n={},o=e.parcelRequire94c2;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,o.call(l.exports,l,l.exports),l.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire94c2=o),o.register;var l=o("47Mwn"),a=o("ilpIi"),d=o("6AR8M");const i=document.getElementById("book-form"),r=document.getElementById("books"),c=document.getElementById("signOutBttn");async function u(){r.innerHTML="",(await (0,a.getDocs)((0,a.collection)(l.db,"books"))).forEach(e=>{let t=e.data();s(e.id,t.title,t.author,t.genre)})}function s(e,t,n,o){let d=document.createElement("li");d.dataset.id=e;let i=document.createElement("div");i.classList.add("book-details");let c=document.createElement("p");c.textContent=`\u{1F4D6} ${t}`,c.classList.add("book-title");let u=document.createElement("p");u.textContent=`\u{270D}\u{FE0F} ${n}`;let p=document.createElement("p");p.textContent=`\u{1F4DA} ${o}`;let v=document.createElement("button");v.textContent="✏️ Edit",v.classList.add("edit"),v.addEventListener("click",()=>{let i,r,c;return d.innerHTML=`
        <input type="text" class="edit-title" value="${t}">
        <input type="text" class="edit-author" value="${n}">
        <input type="text" class="edit-genre" value="${o}">
        <button class="save">\u{1F4BE} Save</button>
        <button class="cancel">\u{274C} Cancel</button>
    `,i=d.querySelector(".edit-title"),r=d.querySelector(".edit-author"),c=d.querySelector(".edit-genre"),void(d.querySelector(".save").addEventListener("click",async()=>{let t=i.value,n=r.value,o=c.value;await (0,a.updateDoc)((0,a.doc)(l.db,"books",e),{title:t,author:n,genre:o}),s(e,t,n,o),d.remove()}),d.querySelector(".cancel").addEventListener("click",()=>{s(e,t,n,o),d.remove()}))});let E=document.createElement("button");E.textContent="\uD83D\uDDD1 Delete",E.classList.add("delete"),E.addEventListener("click",()=>m(e)),i.appendChild(c),i.appendChild(u),i.appendChild(p),d.appendChild(i),d.appendChild(v),d.appendChild(E),r.appendChild(d)}async function m(e){await (0,a.deleteDoc)((0,a.doc)(l.db,"books",e)),document.querySelector(`[data-id='${e}']`).remove()}(0,d.onAuthStateChanged)(l.auth,e=>{e||(window.location.href="login.html")}),i.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("title").value,n=document.getElementById("author").value,o=document.getElementById("genre").value;s((await (0,a.addDoc)((0,a.collection)(l.db,"books"),{title:t,author:n,genre:o})).id,t,n,o),i.reset()}),c.addEventListener("click",()=>{(0,d.signOut)(l.auth).then(()=>{localStorage.removeItem("user"),window.location.href="login.html"}).catch(e=>{console.error("Sign Out Error",e)})}),window.addEventListener("DOMContentLoaded",u);
//# sourceMappingURL=index.29197082.js.map
